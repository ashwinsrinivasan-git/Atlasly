<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlasly - Daily Geography Challenge</title>
    <meta name="description" content="Master world geography with Atlasly. Guess countries from their silhouettes with daily challenges and bonus rounds.">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson@3"></script>
    
    <style>
        body { margin: 0; padding: 0; }
        #root { min-height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icons
        const Globe = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
            </svg>
        );
        const Sun = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32 1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
            </svg>
        );
        const Moon = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
        );
        const HelpCircle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><circle cx="12" cy="17" r=".5" fill="currentColor"/>
            </svg>
        );
        const Navigation = ({ size = 24, rotation = 0 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" style={{ transform: `rotate(${rotation}deg)` }}>
                <polygon points="12 2 19 21 12 17 5 21 12 2"/>
            </svg>
        );
        const Crown = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14"/>
            </svg>
        );
        const X = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
        );
        const Play = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"/>
            </svg>
        );
        const Zap = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
            </svg>
        );
        const TrendingUp = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/>
            </svg>
        );

        // Country data (same as before)
        const COUNTRIES_DATA = {
            "Italy": { aliases: ["Italy"], lat: 42.5, lon: 12.5, capital: "Rome", neighbors: ["France", "Switzerland", "Austria", "Slovenia"], flag: "üáÆüáπ", fact: "Home to the most UNESCO World Heritage Sites" },
            "Japan": { aliases: ["Japan"], lat: 36.2, lon: 138.2, capital: "Tokyo", neighbors: [], flag: "üáØüáµ", fact: "Has over 6,800 islands" },
            "France": { aliases: ["France"], lat: 46.2, lon: 2.2, capital: "Paris", neighbors: ["Spain", "Belgium", "Germany", "Switzerland", "Italy"], flag: "üá´üá∑", fact: "Most visited country in the world" },
            "Spain": { aliases: ["Spain"], lat: 40.4, lon: -3.7, capital: "Madrid", neighbors: ["France", "Portugal"], flag: "üá™üá∏", fact: "Has the world's oldest restaurant (1725)" },
            "Brazil": { aliases: ["Brazil"], lat: -14.2, lon: -51.9, capital: "Bras√≠lia", neighbors: ["Argentina", "Peru"], flag: "üáßüá∑", fact: "Amazon covers 60% of the country" },
            "Australia": { aliases: ["Australia"], lat: -25.2, lon: 133.7, capital: "Canberra", neighbors: [], flag: "üá¶üá∫", fact: "Home to 21 of world's 25 most venomous snakes" },
            "India": { aliases: ["India"], lat: 20.5, lon: 78.9, capital: "New Delhi", neighbors: ["Pakistan", "China", "Nepal"], flag: "üáÆüá≥", fact: "World's largest democracy with 22 languages" },
            "Mexico": { aliases: ["Mexico"], lat: 23.6, lon: -102.5, capital: "Mexico City", neighbors: ["United States"], flag: "üá≤üáΩ", fact: "Chocolate and corn originated here" },
            "Canada": { aliases: ["Canada"], lat: 56.1, lon: -106.3, capital: "Ottawa", neighbors: ["United States"], flag: "üá®üá¶", fact: "World's longest coastline (202,080 km)" },
            "Egypt": { aliases: ["Egypt"], lat: 26.8, lon: 30.8, capital: "Cairo", neighbors: ["Libya", "Sudan"], flag: "üá™üá¨", fact: "Civilization lasted over 3,000 years" },
            "Germany": { aliases: ["Germany"], lat: 51.1, lon: 10.4, capital: "Berlin", neighbors: ["France", "Poland", "Austria"], flag: "üá©üá™", fact: "Has over 1,500 types of beer" },
            "Thailand": { aliases: ["Thailand"], lat: 15.8, lon: 100.9, capital: "Bangkok", neighbors: ["Myanmar", "Laos"], flag: "üáπüá≠", fact: "Never colonized" },
            "Argentina": { aliases: ["Argentina"], lat: -38.4, lon: -63.6, capital: "Buenos Aires", neighbors: ["Chile", "Brazil", "Uruguay"], flag: "üá¶üá∑", fact: "Tango originated here" },
            "Greece": { aliases: ["Greece"], lat: 39.0, lon: 21.8, capital: "Athens", neighbors: ["Albania", "Bulgaria", "Turkey"], flag: "üá¨üá∑", fact: "Over 6,000 islands" },
            "Peru": { aliases: ["Peru"], lat: -9.1, lon: -75.0, capital: "Lima", neighbors: ["Ecuador", "Colombia", "Brazil"], flag: "üáµüá™", fact: "3,000 varieties of potatoes" }
        };

        const COUNTRY_NAMES = Object.keys(COUNTRIES_DATA);

        const normalizeCountryName = (name) => name.toLowerCase().replace(/[^a-z\s]/g, '').replace(/\s+/g, ' ').trim();

        const calculateDistance = (lat1, lon1, lat2, lon2) => {
            const R = 6371;
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) + Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return Math.round(R * c);
        };

        const calculateBearing = (lat1, lon1, lat2, lon2) => {
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const y = Math.sin(dLon) * Math.cos(lat2 * Math.PI / 180);
            const x = Math.cos(lat1 * Math.PI / 180) * Math.sin(lat2 * Math.PI / 180) - Math.sin(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) * Math.cos(dLon);
            return (Math.atan2(y, x) * 180 / Math.PI + 360) % 360;
        };

        const getDailySeed = () => {
            const today = new Date();
            return today.getFullYear() * 10000 + (today.getMonth() + 1) * 100 + today.getDate();
        };

        const seededRandom = (seed) => {
            let x = Math.sin(seed++) * 10000;
            return x - Math.floor(x);
        };

        const getDailyCountry = () => {
            const seed = getDailySeed();
            return COUNTRY_NAMES[Math.floor(seededRandom(seed) * COUNTRY_NAMES.length)];
        };

        // Country Silhouette Component
        const CountrySilhouette = ({ countryName, worldData, theme }) => {
            const svgRef = useRef(null);

            useEffect(() => {
                if (!worldData || !svgRef.current || !countryName) return;

                const svg = d3.select(svgRef.current);
                svg.selectAll("*").remove();

                try {
                    const countries = topojson.feature(worldData, worldData.objects.countries);
                    const config = COUNTRIES_DATA[countryName];
                    const searchNames = config ? config.aliases.map(normalizeCountryName) : [normalizeCountryName(countryName)];
                    
                    const target = countries.features.find(d => {
                        const propName = normalizeCountryName(d.properties.name || '');
                        return searchNames.some(n => propName === n || propName.includes(n) || n.includes(propName));
                    });

                    if (!target) return;

                    const width = 500, height = 400;
                    const projection = d3.geoMercator().fitSize([width - 60, height - 60], target);
                    const path = d3.geoPath().projection(projection);

                    const fillColor = theme === 'dark' ? '#3b82f6' : '#2563eb';
                    const strokeColor = theme === 'dark' ? '#1d4ed8' : '#1e40af';

                    svg.append("path")
                        .datum(target)
                        .attr("d", path)
                        .attr("transform", "translate(30, 30)")
                        .attr("fill", fillColor)
                        .attr("stroke", strokeColor)
                        .attr("stroke-width", 2.5);
                } catch (err) {
                    console.error(err);
                }
            }, [countryName, worldData, theme]);

            return <svg ref={svgRef} width="500" height="400" viewBox="0 0 500 400" />;
        };

        // Main Component
        const GeoQuestGame = () => {
            const [worldData, setWorldData] = useState(null);
            const [screen, setScreen] = useState('landing');
            const [theme, setTheme] = useState('light'); // light, dark, ocean
            const [isPremium, setIsPremium] = useState(false);
            const [targetCountry, setTargetCountry] = useState(null);
            const [guesses, setGuesses] = useState([]);
            const [currentInput, setCurrentInput] = useState('');
            const [gameComplete, setGameComplete] = useState(false);
            const [won, setWon] = useState(false);
            const [bonusRound, setBonusRound] = useState(null);
            const [bonusAnswers, setBonusAnswers] = useState({});
            const [showHelp, setShowHelp] = useState(false);
            const [dailyCompleted, setDailyCompleted] = useState(false);

            useEffect(() => {
                fetch('https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json')
                    .then(r => r.json())
                    .then(setWorldData)
                    .catch(console.error);

                const lastDaily = localStorage.getItem('lastDailyDate');
                if (lastDaily === String(getDailySeed())) {
                    setDailyCompleted(true);
                }

                const savedTheme = localStorage.getItem('theme') || 'light';
                setTheme(savedTheme);
            }, []);

            const changeTheme = (newTheme) => {
                setTheme(newTheme);
                localStorage.setItem('theme', newTheme);
            };

            const startDaily = () => {
                setTargetCountry(getDailyCountry());
                setGuesses([]);
                setGameComplete(false);
                setWon(false);
                setBonusRound(null);
                setBonusAnswers({});
                setCurrentInput('');
                setScreen('game');
            };

            const startUnlimited = () => {
                const random = COUNTRY_NAMES[Math.floor(Math.random() * COUNTRY_NAMES.length)];
                setTargetCountry(random);
                setGuesses([]);
                setGameComplete(false);
                setWon(false);
                setBonusRound(null);
                setBonusAnswers({});
                setCurrentInput('');
                setScreen('game');
            };

            const submitGuess = () => {
                if (!currentInput.trim() || gameComplete) return;

                const guessed = COUNTRY_NAMES.find(c => normalizeCountryName(c) === normalizeCountryName(currentInput));
                if (!guessed) return;

                const guessedData = COUNTRIES_DATA[guessed];
                const targetData = COUNTRIES_DATA[targetCountry];

                const distance = calculateDistance(guessedData.lat, guessedData.lon, targetData.lat, targetData.lon);
                const direction = calculateBearing(guessedData.lat, guessedData.lon, targetData.lat, targetData.lon);
                const proximity = Math.max(0, Math.round(100 - (distance / 200)));

                const newGuesses = [...guesses, { country: guessed, distance, direction, proximity }];
                setGuesses(newGuesses);
                setCurrentInput('');

                if (guessed === targetCountry) {
                    setWon(true);
                    setGameComplete(true);
                    localStorage.setItem('lastDailyDate', String(getDailySeed()));
                    setDailyCompleted(true);
                } else if (newGuesses.length >= 6) {
                    setGameComplete(true);
                }
            };

            const submitBonusAnswer = (answer, correct) => {
                const isCorrect = answer === correct;
                setBonusAnswers({...bonusAnswers, [bonusRound]: { answer, correct: isCorrect }});
            };

            const getRandomCountries = (exclude, count = 3) => {
                const available = COUNTRY_NAMES.filter(c => c !== exclude);
                const selected = [];
                while (selected.length < count && available.length > 0) {
                    const idx = Math.floor(Math.random() * available.length);
                    selected.push(available[idx]);
                    available.splice(idx, 1);
                }
                return selected;
            };

            const getFlagOptions = () => {
                const wrong = getRandomCountries(targetCountry, 3);
                return [...wrong, targetCountry].sort(() => Math.random() - 0.5);
            };

            const getCapitalOptions = () => {
                const wrong = getRandomCountries(targetCountry, 3);
                return [...wrong.map(c => COUNTRIES_DATA[c].capital), COUNTRIES_DATA[targetCountry].capital].sort(() => Math.random() - 0.5);
            };

            const getNeighborOptions = () => {
                const correctNeighbors = COUNTRIES_DATA[targetCountry].neighbors;
                if (correctNeighbors.length === 0) return [];
                const wrongOptions = getRandomCountries(targetCountry, 3).filter(c => !correctNeighbors.includes(c));
                const randomCorrect = correctNeighbors[Math.floor(Math.random() * correctNeighbors.length)];
                return { options: [...wrongOptions.slice(0, 3), randomCorrect].sort(() => Math.random() - 0.5), correct: randomCorrect };
            };

            if (!worldData) {
                return <div className={`loading theme-${theme}`}><Globe size={48} /><p>Loading world map...</p></div>;
            }

            if (screen === 'landing') {
                return (
                    <div className={`landing theme-${theme}`}>
                        <div className="gradient-orb orb-1"></div>
                        <div className="gradient-orb orb-2"></div>

                        <nav className="top-nav">
                            <div className="nav-brand">
                                <div className="brand-icon">
                                    <Globe size={28} />
                                </div>
                                <span className="brand-name">Atlasly</span>
                            </div>
                            <div className="nav-actions">
                                <div className="theme-selector">
                                    <button 
                                        className={`theme-btn ${theme === 'light' ? 'active' : ''}`}
                                        onClick={() => changeTheme('light')}
                                    >
                                        <Sun size={16} />
                                    </button>
                                    <button 
                                        className={`theme-btn ${theme === 'dark' ? 'active' : ''}`}
                                        onClick={() => changeTheme('dark')}
                                    >
                                        <Moon size={16} />
                                    </button>
                                    <button 
                                        className={`theme-btn ${theme === 'ocean' ? 'active' : ''}`}
                                        onClick={() => changeTheme('ocean')}
                                    >
                                        <div className="ocean-icon">üåä</div>
                                    </button>
                                </div>
                                <button className="help-btn" onClick={() => setShowHelp(true)}>
                                    <HelpCircle size={18} />
                                </button>
                            </div>
                        </nav>

                        <div className="landing-content">
                            {/* Hero Card */}
                            <div className="hero-card">
                                <div className="hero-badge">
                                    <Zap size={14} />
                                    <span>Daily Challenge</span>
                                </div>
                                <h1>Master World Geography</h1>
                                <p>Guess countries from their silhouettes. Get instant feedback with distance and direction clues.</p>
                            </div>

                            {/* Stats Cards */}
                            <div className="stats-cards">
                                <div className="stat-card">
                                    <div className="stat-icon">üó∫Ô∏è</div>
                                    <div className="stat-value">15+</div>
                                    <div className="stat-label">Countries</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-icon">üéØ</div>
                                    <div className="stat-value">6</div>
                                    <div className="stat-label">Attempts</div>
                                </div>
                                <div className="stat-card">
                                    <div className="stat-icon">üèÜ</div>
                                    <div className="stat-value">5</div>
                                    <div className="stat-label">Bonus Rounds</div>
                                </div>
                            </div>

                            {/* Game Mode Cards */}
                            <div className="play-cards">
                                <div className="play-card daily-card" onClick={() => !dailyCompleted && startDaily()}>
                                    <div className="play-card-header">
                                        <div className="play-icon">üìÖ</div>
                                        <div className="play-info">
                                            <h3>Daily Challenge</h3>
                                            <p>New puzzle every day</p>
                                        </div>
                                        {dailyCompleted && <div className="check-badge">‚úì</div>}
                                    </div>
                                    {!dailyCompleted && (
                                        <button className="play-btn">
                                            <Play size={16} />
                                            <span>Play Now</span>
                                        </button>
                                    )}
                                    {dailyCompleted && (
                                        <div className="completed-banner">
                                            Completed Today! Come back tomorrow
                                        </div>
                                    )}
                                </div>

                                <div className="play-card premium-card">
                                    <div className="premium-tag">
                                        <Crown size={12} />
                                        <span>Premium</span>
                                    </div>
                                    <div className="play-card-header">
                                        <div className="play-icon">‚ôæÔ∏è</div>
                                        <div className="play-info">
                                            <h3>Unlimited Mode</h3>
                                            <p>Practice endlessly</p>
                                        </div>
                                    </div>
                                    <div className="premium-toggle-box">
                                        <label className="toggle-switch-label">
                                            <input 
                                                type="checkbox" 
                                                checked={isPremium}
                                                onChange={e => setIsPremium(e.target.checked)}
                                                className="toggle-input"
                                            />
                                            <span className="toggle-slider"></span>
                                        </label>
                                        <span className="toggle-label-text">
                                            {isPremium ? 'Premium Active' : 'Enable (Test Mode)'}
                                        </span>
                                    </div>
                                    {isPremium && (
                                        <button className="play-btn premium-btn" onClick={startUnlimited}>
                                            <Zap size={16} />
                                            <span>Start Playing</span>
                                        </button>
                                    )}
                                </div>
                            </div>

                            {/* Feature Cards */}
                            <div className="feature-cards">
                                <div className="mini-card">
                                    <div className="mini-icon">üö©</div>
                                    <div className="mini-text">
                                        <h4>Flags</h4>
                                        <p>Identify national flags</p>
                                    </div>
                                </div>
                                <div className="mini-card">
                                    <div className="mini-icon">üèõÔ∏è</div>
                                    <div className="mini-text">
                                        <h4>Capitals</h4>
                                        <p>Learn capital cities</p>
                                    </div>
                                </div>
                                <div className="mini-card">
                                    <div className="mini-icon">üåç</div>
                                    <div className="mini-text">
                                        <h4>Borders</h4>
                                        <p>Discover neighbors</p>
                                    </div>
                                </div>
                                <div className="mini-card">
                                    <div className="mini-icon">üìä</div>
                                    <div className="mini-text">
                                        <h4>Stats</h4>
                                        <p>Track your progress</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        {showHelp && (
                            <div className="modal-overlay" onClick={() => setShowHelp(false)}>
                                <div className="modal-card" onClick={e => e.stopPropagation()}>
                                    <button className="modal-close" onClick={() => setShowHelp(false)}><X size={20} /></button>
                                    <h2>How to Play</h2>
                                    <div className="help-steps">
                                        <div className="help-step">
                                            <div className="step-number">1</div>
                                            <div className="step-content">
                                                <h4>Look at the Shape</h4>
                                                <p>A country silhouette is displayed. Study its outline carefully.</p>
                                            </div>
                                        </div>
                                        <div className="help-step">
                                            <div className="step-number">2</div>
                                            <div className="step-content">
                                                <h4>Make Your Guess</h4>
                                                <p>Type a country name. You have 6 attempts to find the answer.</p>
                                            </div>
                                        </div>
                                        <div className="help-step">
                                            <div className="step-number">3</div>
                                            <div className="step-content">
                                                <h4>Use the Clues</h4>
                                                <p>Get distance (km), direction arrow, and proximity % after each guess.</p>
                                            </div>
                                        </div>
                                        <div className="help-step">
                                            <div className="step-number">4</div>
                                            <div className="step-content">
                                                <h4>Unlock Bonuses</h4>
                                                <p>After solving, test your knowledge with flag, capital, and neighbor challenges!</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                );
            }

            // Game Screen (simplified for brevity - keeping same logic as before)
            return (
                <div className={`game-screen theme-${theme}`}>
                    <nav className="game-nav">
                        <button className="back-btn" onClick={() => setScreen('landing')}>‚Üê Back</button>
                        <span className="attempts-counter">Attempt {guesses.length} / 6</span>
                    </nav>

                    <main className="game-container">
                        {!gameComplete && (
                            <>
                                <div className="map-box">
                                    <CountrySilhouette countryName={targetCountry} worldData={worldData} theme={theme} />
                                </div>

                                <div className="guesses-list">
                                    {guesses.map((g, i) => (
                                        <div key={i} className="guess-item">
                                            <span className="guess-name">{g.country}</span>
                                            <div className="guess-info">
                                                <span className="info-badge">{g.distance} km</span>
                                                <Navigation size={20} rotation={g.direction} />
                                                <span className="info-badge">{g.proximity}%</span>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className="input-box">
                                    <input
                                        type="text"
                                        placeholder="Enter country name..."
                                        value={currentInput}
                                        onChange={e => setCurrentInput(e.target.value)}
                                        onKeyDown={e => e.key === 'Enter' && submitGuess()}
                                        list="countries"
                                    />
                                    <datalist id="countries">
                                        {COUNTRY_NAMES.map(n => <option key={n} value={n} />)}
                                    </datalist>
                                    <button onClick={submitGuess} className="submit-btn">Guess</button>
                                </div>
                            </>
                        )}

                        {gameComplete && (
                            <div className="results-box">
                                <div className="result-header">
                                    <div className="result-emoji">{won ? 'üéâ' : 'üó∫Ô∏è'}</div>
                                    <h2>{won ? 'Excellent!' : 'Good Try!'}</h2>
                                    <p>The answer was <strong>{targetCountry}</strong></p>
                                    <div className="fun-fact">
                                        <span className="fact-icon">üí°</span>
                                        <span>{COUNTRIES_DATA[targetCountry].fact}</span>
                                    </div>
                                </div>

                                {won && (
                                    <div className="bonus-rounds">
                                        <h3>Bonus Challenges</h3>
                                        <div className="bonus-tabs">
                                            <button 
                                                onClick={() => setBonusRound('flag')} 
                                                className={`bonus-tab ${bonusRound === 'flag' ? 'active' : ''} ${bonusAnswers.flag ? (bonusAnswers.flag.correct ? 'correct' : 'wrong') : ''}`}
                                            >
                                                üö© Flag {bonusAnswers.flag && (bonusAnswers.flag.correct ? '‚úì' : '‚úó')}
                                            </button>
                                            <button 
                                                onClick={() => setBonusRound('capital')} 
                                                className={`bonus-tab ${bonusRound === 'capital' ? 'active' : ''} ${bonusAnswers.capital ? (bonusAnswers.capital.correct ? 'correct' : 'wrong') : ''}`}
                                            >
                                                üèõÔ∏è Capital {bonusAnswers.capital && (bonusAnswers.capital.correct ? '‚úì' : '‚úó')}
                                            </button>
                                            {COUNTRIES_DATA[targetCountry].neighbors.length > 0 && (
                                                <button 
                                                    onClick={() => setBonusRound('neighbor')} 
                                                    className={`bonus-tab ${bonusRound === 'neighbor' ? 'active' : ''} ${bonusAnswers.neighbor ? (bonusAnswers.neighbor.correct ? 'correct' : 'wrong') : ''}`}
                                                >
                                                    üåç Neighbor {bonusAnswers.neighbor && (bonusAnswers.neighbor.correct ? '‚úì' : '‚úó')}
                                                </button>
                                            )}
                                        </div>

                                        {bonusRound === 'flag' && !bonusAnswers.flag && (
                                            <div className="bonus-content">
                                                <p className="bonus-q">Which flag belongs to {targetCountry}?</p>
                                                <div className="flag-grid">
                                                    {getFlagOptions().map(c => (
                                                        <button key={c} onClick={() => submitBonusAnswer(c, targetCountry)} className="flag-btn">
                                                            <span className="flag-emoji-large">{COUNTRIES_DATA[c].flag}</span>
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        {bonusRound === 'flag' && bonusAnswers.flag && (
                                            <div className={`bonus-feedback ${bonusAnswers.flag.correct ? 'success' : 'error'}`}>
                                                {bonusAnswers.flag.correct ? '‚úÖ Correct!' : `‚ùå Wrong! It was ${COUNTRIES_DATA[targetCountry].flag} ${targetCountry}`}
                                            </div>
                                        )}

                                        {bonusRound === 'capital' && !bonusAnswers.capital && (
                                            <div className="bonus-content">
                                                <p className="bonus-q">What is the capital of {targetCountry}?</p>
                                                <div className="options-grid">
                                                    {getCapitalOptions().map(cap => (
                                                        <button key={cap} onClick={() => submitBonusAnswer(cap, COUNTRIES_DATA[targetCountry].capital)} className="option-btn">
                                                            {cap}
                                                        </button>
                                                    ))}
                                                </div>
                                            </div>
                                        )}

                                        {bonusRound === 'capital' && bonusAnswers.capital && (
                                            <div className={`bonus-feedback ${bonusAnswers.capital.correct ? 'success' : 'error'}`}>
                                                {bonusAnswers.capital.correct ? '‚úÖ Correct!' : `‚ùå Wrong! It was ${COUNTRIES_DATA[targetCountry].capital}`}
                                            </div>
                                        )}

                                        {bonusRound === 'neighbor' && !bonusAnswers.neighbor && COUNTRIES_DATA[targetCountry].neighbors.length > 0 && (() => {
                                            const nData = getNeighborOptions();
                                            return (
                                                <div className="bonus-content">
                                                    <p className="bonus-q">Which country shares a border with {targetCountry}?</p>
                                                    <div className="options-grid">
                                                        {nData.options.map(c => (
                                                            <button key={c} onClick={() => submitBonusAnswer(c, nData.correct)} className="option-btn">
                                                                {c}
                                                            </button>
                                                        ))}
                                                    </div>
                                                </div>
                                            );
                                        })()}

                                        {bonusRound === 'neighbor' && bonusAnswers.neighbor && (
                                            <div className={`bonus-feedback ${bonusAnswers.neighbor.correct ? 'success' : 'error'}`}>
                                                {bonusAnswers.neighbor.correct ? '‚úÖ Correct!' : `‚ùå Wrong! Correct: ${COUNTRIES_DATA[targetCountry].neighbors.join(', ')}`}
                                            </div>
                                        )}
                                    </div>
                                )}

                                <button onClick={() => setScreen('landing')} className="home-btn">Back to Home</button>
                            </div>
                        )}
                    </main>

                    <style>{`
                        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

                        * { margin: 0; padding: 0; box-sizing: border-box; }
                        body { font-family: 'Plus Jakarta Sans', sans-serif; }

                        /* Theme Variables */
                        .theme-light {
                            --bg-primary: #ffffff;
                            --bg-secondary: #f8fafc;
                            --bg-tertiary: #f1f5f9;
                            --text-primary: #0f172a;
                            --text-secondary: #475569;
                            --text-muted: #94a3b8;
                            --accent: #2563eb;
                            --accent-hover: #1d4ed8;
                            --border: #e2e8f0;
                            --shadow: rgba(0, 0, 0, 0.08);
                        }

                        .theme-dark {
                            --bg-primary: #0f172a;
                            --bg-secondary: #1e293b;
                            --bg-tertiary: #334155;
                            --text-primary: #f1f5f9;
                            --text-secondary: #cbd5e1;
                            --text-muted: #64748b;
                            --accent: #3b82f6;
                            --accent-hover: #2563eb;
                            --border: #334155;
                            --shadow: rgba(0, 0, 0, 0.3);
                        }

                        .theme-ocean {
                            --bg-primary: #001a33;
                            --bg-secondary: #003366;
                            --bg-tertiary: #004d99;
                            --text-primary: #e0f2ff;
                            --text-secondary: #bae6fd;
                            --text-muted: #7dd3fc;
                            --accent: #0ea5e9;
                            --accent-hover: #0284c7;
                            --border: #075985;
                            --shadow: rgba(0, 0, 0, 0.5);
                        }

                        .loading {
                            min-height: 100vh;
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            justify-content: center;
                            gap: 1.5rem;
                            background: var(--bg-primary);
                            color: var(--accent);
                        }

                        .loading p {
                            color: var(--text-secondary);
                            font-weight: 600;
                        }

                        /* Landing Page */
                        .landing {
                            min-height: 100vh;
                            background: var(--bg-primary);
                            position: relative;
                            overflow-x: hidden;
                        }

                        .gradient-orb {
                            position: fixed;
                            border-radius: 50%;
                            filter: blur(100px);
                            opacity: 0.3;
                            pointer-events: none;
                            z-index: 0;
                        }

                        .orb-1 {
                            width: 600px;
                            height: 600px;
                            background: radial-gradient(circle, var(--accent), transparent);
                            top: -300px;
                            right: -200px;
                        }

                        .orb-2 {
                            width: 500px;
                            height: 500px;
                            background: radial-gradient(circle, var(--accent), transparent);
                            bottom: -200px;
                            left: -150px;
                        }

                        .top-nav {
                            position: sticky;
                            top: 0;
                            z-index: 100;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 1rem 1.5rem;
                            background: var(--bg-primary);
                            border-bottom: 1px solid var(--border);
                        }

                        .nav-brand {
                            display: flex;
                            align-items: center;
                            gap: 0.75rem;
                        }

                        .brand-icon {
                            width: 40px;
                            height: 40px;
                            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
                            border-radius: 10px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            color: white;
                            box-shadow: 0 2px 8px var(--shadow);
                        }

                        .brand-name {
                            font-size: 1.25rem;
                            font-weight: 800;
                            color: var(--text-primary);
                            letter-spacing: -0.02em;
                        }

                        .nav-actions {
                            display: flex;
                            gap: 0.75rem;
                            align-items: center;
                        }

                        .theme-selector {
                            display: flex;
                            gap: 0.25rem;
                            background: var(--bg-secondary);
                            padding: 0.25rem;
                            border-radius: 8px;
                            border: 1px solid var(--border);
                        }

                        .theme-btn {
                            background: transparent;
                            border: none;
                            padding: 0.5rem;
                            border-radius: 6px;
                            cursor: pointer;
                            color: var(--text-muted);
                            transition: all 0.2s;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        }

                        .theme-btn:hover {
                            background: var(--bg-tertiary);
                            color: var(--text-primary);
                        }

                        .theme-btn.active {
                            background: var(--accent);
                            color: white;
                        }

                        .ocean-icon {
                            font-size: 16px;
                            line-height: 1;
                        }

                        .help-btn {
                            background: var(--bg-secondary);
                            border: 1px solid var(--border);
                            padding: 0.5rem;
                            border-radius: 8px;
                            cursor: pointer;
                            color: var(--text-secondary);
                            transition: all 0.2s;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        }

                        .help-btn:hover {
                            background: var(--bg-tertiary);
                            color: var(--text-primary);
                        }

                        .landing-content {
                            max-width: 640px;
                            margin: 0 auto;
                            padding: 1.5rem;
                            display: flex;
                            flex-direction: column;
                            gap: 1.5rem;
                        }

                        /* Hero Card */
                        .hero-card {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 20px;
                            padding: 2rem;
                            text-align: center;
                        }

                        .hero-badge {
                            display: inline-flex;
                            align-items: center;
                            gap: 0.5rem;
                            background: var(--bg-tertiary);
                            border: 1px solid var(--border);
                            padding: 0.5rem 1rem;
                            border-radius: 50px;
                            color: var(--accent);
                            font-weight: 700;
                            font-size: 0.875rem;
                            margin-bottom: 1.5rem;
                        }

                        .hero-card h1 {
                            font-size: 2.5rem;
                            font-weight: 800;
                            color: var(--text-primary);
                            margin-bottom: 1rem;
                            letter-spacing: -0.03em;
                            line-height: 1.1;
                        }

                        .hero-card p {
                            font-size: 1.125rem;
                            color: var(--text-secondary);
                            line-height: 1.6;
                        }

                        /* Stats Cards */
                        .stats-cards {
                            display: grid;
                            grid-template-columns: repeat(3, 1fr);
                            gap: 1rem;
                        }

                        .stat-card {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 16px;
                            padding: 1.5rem 1rem;
                            text-align: center;
                            transition: all 0.3s;
                        }

                        .stat-card:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 8px 24px var(--shadow);
                            border-color: var(--accent);
                        }

                        .stat-icon {
                            font-size: 2rem;
                            margin-bottom: 0.5rem;
                        }

                        .stat-value {
                            font-size: 1.75rem;
                            font-weight: 800;
                            color: var(--accent);
                            margin-bottom: 0.25rem;
                        }

                        .stat-label {
                            font-size: 0.875rem;
                            color: var(--text-muted);
                            font-weight: 600;
                        }

                        /* Play Cards */
                        .play-cards {
                            display: flex;
                            flex-direction: column;
                            gap: 1.5rem;
                        }

                        .play-card {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 20px;
                            padding: 1.75rem;
                            transition: all 0.3s;
                            position: relative;
                        }

                        .play-card:hover {
                            transform: translateY(-4px);
                            box-shadow: 0 12px 32px var(--shadow);
                            border-color: var(--accent);
                        }

                        .play-card-header {
                            display: flex;
                            align-items: center;
                            gap: 1rem;
                            margin-bottom: 1.25rem;
                        }

                        .play-icon {
                            width: 56px;
                            height: 56px;
                            background: var(--bg-tertiary);
                            border-radius: 14px;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-size: 1.75rem;
                            flex-shrink: 0;
                        }

                        .play-info {
                            flex: 1;
                        }

                        .play-info h3 {
                            font-size: 1.375rem;
                            font-weight: 700;
                            color: var(--text-primary);
                            margin-bottom: 0.25rem;
                        }

                        .play-info p {
                            color: var(--text-secondary);
                            font-size: 0.9375rem;
                        }

                        .check-badge {
                            width: 32px;
                            height: 32px;
                            background: #dcfce7;
                            color: #16a34a;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: 700;
                            font-size: 1.125rem;
                        }

                        .play-btn {
                            width: 100%;
                            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
                            color: white;
                            border: none;
                            padding: 1.125rem;
                            border-radius: 14px;
                            font-weight: 700;
                            font-size: 1rem;
                            cursor: pointer;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 0.625rem;
                            transition: all 0.2s;
                        }

                        .play-btn:hover {
                            transform: scale(1.02);
                            box-shadow: 0 8px 24px rgba(37, 99, 235, 0.3);
                        }

                        .completed-banner {
                            background: #dcfce7;
                            color: #16a34a;
                            padding: 1rem;
                            border-radius: 12px;
                            font-weight: 600;
                            text-align: center;
                        }

                        .premium-tag {
                            position: absolute;
                            top: 1.25rem;
                            right: 1.25rem;
                            background: linear-gradient(135deg, #fbbf24, #f59e0b);
                            color: white;
                            padding: 0.375rem 0.75rem;
                            border-radius: 50px;
                            font-size: 0.75rem;
                            font-weight: 700;
                            display: flex;
                            align-items: center;
                            gap: 0.375rem;
                        }

                        .premium-toggle-box {
                            background: var(--bg-tertiary);
                            padding: 1rem;
                            border-radius: 12px;
                            display: flex;
                            align-items: center;
                            gap: 1rem;
                            margin-bottom: 1.25rem;
                        }

                        .toggle-switch-label {
                            position: relative;
                            display: inline-block;
                            width: 48px;
                            height: 26px;
                            flex-shrink: 0;
                        }

                        .toggle-input {
                            opacity: 0;
                            width: 0;
                            height: 0;
                        }

                        .toggle-slider {
                            position: absolute;
                            cursor: pointer;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background-color: var(--border);
                            transition: 0.3s;
                            border-radius: 50px;
                        }

                        .toggle-slider:before {
                            position: absolute;
                            content: "";
                            height: 20px;
                            width: 20px;
                            left: 3px;
                            bottom: 3px;
                            background-color: white;
                            transition: 0.3s;
                            border-radius: 50%;
                        }

                        .toggle-input:checked + .toggle-slider {
                            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
                        }

                        .toggle-input:checked + .toggle-slider:before {
                            transform: translateX(22px);
                        }

                        .toggle-label-text {
                            font-size: 0.9375rem;
                            font-weight: 600;
                            color: var(--text-secondary);
                        }

                        .premium-btn {
                            background: linear-gradient(135deg, #fbbf24, #f59e0b);
                        }

                        .premium-btn:hover {
                            box-shadow: 0 8px 24px rgba(251, 191, 36, 0.3);
                        }

                        /* Feature Cards */
                        .feature-cards {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 1rem;
                        }

                        .mini-card {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 16px;
                            padding: 1.25rem;
                            display: flex;
                            gap: 1rem;
                            align-items: center;
                            transition: all 0.3s;
                        }

                        .mini-card:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 6px 20px var(--shadow);
                            border-color: var(--accent);
                        }

                        .mini-icon {
                            font-size: 2rem;
                            flex-shrink: 0;
                        }

                        .mini-text h4 {
                            font-size: 1rem;
                            font-weight: 700;
                            color: var(--text-primary);
                            margin-bottom: 0.25rem;
                        }

                        .mini-text p {
                            font-size: 0.8125rem;
                            color: var(--text-secondary);
                            line-height: 1.4;
                        }

                        /* Modal */
                        .modal-overlay {
                            position: fixed;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: rgba(0, 0, 0, 0.6);
                            backdrop-filter: blur(8px);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            z-index: 1000;
                            padding: 2rem;
                        }

                        .modal-card {
                            background: var(--bg-primary);
                            border: 1px solid var(--border);
                            border-radius: 24px;
                            padding: 3rem;
                            max-width: 600px;
                            width: 100%;
                            max-height: 90vh;
                            overflow-y: auto;
                            position: relative;
                        }

                        .modal-close {
                            position: absolute;
                            top: 1.5rem;
                            right: 1.5rem;
                            background: var(--bg-secondary);
                            border: none;
                            width: 36px;
                            height: 36px;
                            border-radius: 8px;
                            cursor: pointer;
                            color: var(--text-secondary);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            transition: all 0.2s;
                        }

                        .modal-close:hover {
                            background: var(--bg-tertiary);
                            color: var(--text-primary);
                        }

                        .modal-card h2 {
                            font-size: 2rem;
                            font-weight: 800;
                            color: var(--text-primary);
                            margin-bottom: 2rem;
                        }

                        .help-steps {
                            display: flex;
                            flex-direction: column;
                            gap: 1.5rem;
                        }

                        .help-step {
                            display: flex;
                            gap: 1.25rem;
                        }

                        .step-number {
                            width: 40px;
                            height: 40px;
                            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
                            color: white;
                            border-radius: 50%;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            font-weight: 700;
                            flex-shrink: 0;
                        }

                        .step-content h4 {
                            font-size: 1.125rem;
                            font-weight: 700;
                            color: var(--text-primary);
                            margin-bottom: 0.5rem;
                        }

                        .step-content p {
                            color: var(--text-secondary);
                            line-height: 1.6;
                        }

                        /* Game Screen */
                        .game-screen {
                            min-height: 100vh;
                            background: var(--bg-primary);
                        }

                        .game-nav {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 1.5rem 2rem;
                            background: var(--bg-secondary);
                            border-bottom: 1px solid var(--border);
                        }

                        .back-btn {
                            background: var(--bg-tertiary);
                            border: 1px solid var(--border);
                            color: var(--text-primary);
                            padding: 0.75rem 1.5rem;
                            border-radius: 10px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.2s;
                        }

                        .back-btn:hover {
                            background: var(--accent);
                            color: white;
                            border-color: var(--accent);
                        }

                        .attempts-counter {
                            font-weight: 700;
                            color: var(--text-primary);
                            font-size: 1.125rem;
                        }

                        .game-container {
                            max-width: 800px;
                            margin: 0 auto;
                            padding: 2rem;
                        }

                        .map-box {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 20px;
                            padding: 2rem;
                            margin-bottom: 2rem;
                            display: flex;
                            justify-content: center;
                        }

                        .guesses-list {
                            display: flex;
                            flex-direction: column;
                            gap: 1rem;
                            margin-bottom: 2rem;
                        }

                        .guess-item {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 12px;
                            padding: 1.25rem;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                        }

                        .guess-name {
                            font-weight: 700;
                            color: var(--text-primary);
                            font-size: 1.125rem;
                        }

                        .guess-info {
                            display: flex;
                            gap: 1.25rem;
                            align-items: center;
                        }

                        .info-badge {
                            background: var(--bg-tertiary);
                            color: var(--accent);
                            padding: 0.5rem 1rem;
                            border-radius: 8px;
                            font-weight: 700;
                            font-size: 0.9375rem;
                        }

                        .input-box {
                            display: flex;
                            gap: 1rem;
                        }

                        .input-box input {
                            flex: 1;
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            color: var(--text-primary);
                            padding: 1.25rem;
                            border-radius: 12px;
                            font-size: 1rem;
                            font-weight: 500;
                            transition: all 0.2s;
                        }

                        .input-box input:focus {
                            outline: none;
                            border-color: var(--accent);
                        }

                        .submit-btn {
                            background: linear-gradient(135deg, var(--accent), var(--accent-hover));
                            color: white;
                            border: none;
                            padding: 1.25rem 3rem;
                            border-radius: 12px;
                            font-weight: 700;
                            font-size: 1rem;
                            cursor: pointer;
                            transition: all 0.2s;
                        }

                        .submit-btn:hover {
                            transform: scale(1.02);
                            box-shadow: 0 8px 24px rgba(37, 99, 235, 0.3);
                        }

                        .results-box {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            border-radius: 20px;
                            padding: 3rem;
                        }

                        .result-header {
                            text-align: center;
                            margin-bottom: 2rem;
                        }

                        .result-emoji {
                            font-size: 5rem;
                            margin-bottom: 1rem;
                        }

                        .result-header h2 {
                            font-size: 2.5rem;
                            font-weight: 800;
                            color: var(--text-primary);
                            margin-bottom: 1rem;
                        }

                        .result-header p {
                            color: var(--text-secondary);
                            font-size: 1.125rem;
                        }

                        .result-header strong {
                            color: var(--accent);
                            font-weight: 700;
                        }

                        .fun-fact {
                            background: var(--bg-tertiary);
                            padding: 1.25rem;
                            border-radius: 12px;
                            margin-top: 1.5rem;
                            display: flex;
                            align-items: center;
                            gap: 0.75rem;
                            color: var(--text-secondary);
                            font-style: italic;
                        }

                        .fact-icon {
                            font-size: 1.5rem;
                        }

                        .bonus-rounds {
                            margin-bottom: 2rem;
                        }

                        .bonus-rounds h3 {
                            font-size: 1.5rem;
                            font-weight: 700;
                            color: var(--text-primary);
                            margin-bottom: 1.5rem;
                            text-align: center;
                        }

                        .bonus-tabs {
                            display: flex;
                            gap: 1rem;
                            margin-bottom: 1.5rem;
                        }

                        .bonus-tab {
                            flex: 1;
                            background: var(--bg-tertiary);
                            border: 2px solid var(--border);
                            color: var(--text-primary);
                            padding: 1rem;
                            border-radius: 12px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.2s;
                        }

                        .bonus-tab:hover {
                            background: var(--accent);
                            color: white;
                            border-color: var(--accent);
                        }

                        .bonus-tab.active {
                            background: var(--accent);
                            color: white;
                            border-color: var(--accent);
                        }

                        .bonus-tab.correct {
                            background: #dcfce7;
                            border-color: #16a34a;
                            color: #16a34a;
                        }

                        .bonus-tab.wrong {
                            background: #fee2e2;
                            border-color: #dc2626;
                            color: #dc2626;
                        }

                        .bonus-content {
                            background: var(--bg-tertiary);
                            padding: 2rem;
                            border-radius: 16px;
                        }

                        .bonus-q {
                            text-align: center;
                            font-size: 1.125rem;
                            font-weight: 600;
                            color: var(--text-primary);
                            margin-bottom: 2rem;
                        }

                        .flag-grid {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 1.25rem;
                        }

                        .flag-btn {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            padding: 2.5rem;
                            border-radius: 16px;
                            cursor: pointer;
                            transition: all 0.2s;
                            display: flex;
                            align-items: center;
                            justify-content: center;
                        }

                        .flag-btn:hover {
                            border-color: var(--accent);
                            transform: scale(1.05);
                            box-shadow: 0 8px 24px var(--shadow);
                        }

                        .flag-emoji-large {
                            font-size: 6rem;
                        }

                        .options-grid {
                            display: grid;
                            grid-template-columns: repeat(2, 1fr);
                            gap: 1rem;
                        }

                        .option-btn {
                            background: var(--bg-secondary);
                            border: 2px solid var(--border);
                            color: var(--text-primary);
                            padding: 1.25rem;
                            border-radius: 12px;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.2s;
                        }

                        .option-btn:hover {
                            border-color: var(--accent);
                            background: var(--accent);
                            color: white;
                        }

                        .bonus-feedback {
                            padding: 1.25rem;
                            border-radius: 12px;
                            text-align: center;
                            font-weight: 700;
                            font-size: 1.125rem;
                        }

                        .bonus-feedback.success {
                            background: #dcfce7;
                            color: #16a34a;
                        }

                        .bonus-feedback.error {
                            background: #fee2e2;
                            color: #dc2626;
                        }

                        .home-btn {
                            width: 100%;
                            background: var(--bg-tertiary);
                            border: 2px solid var(--border);
                            color: var(--text-primary);
                            padding: 1.25rem;
                            border-radius: 12px;
                            font-weight: 700;
                            font-size: 1rem;
                            cursor: pointer;
                            transition: all 0.2s;
                        }

                        .home-btn:hover {
                            background: var(--accent);
                            color: white;
                            border-color: var(--accent);
                        }

                        @media (max-width: 768px) {
                            .hero-card h1 { font-size: 2rem; }
                            .stats-cards { grid-template-columns: repeat(3, 1fr); gap: 0.75rem; }
                            .stat-card { padding: 1rem 0.5rem; }
                            .stat-icon { font-size: 1.5rem; }
                            .stat-value { font-size: 1.5rem; }
                            .stat-label { font-size: 0.75rem; }
                            .play-icon { width: 48px; height: 48px; font-size: 1.5rem; }
                            .play-info h3 { font-size: 1.125rem; }
                            .feature-cards { grid-template-columns: 1fr; }
                            .mini-card { padding: 1rem; }
                            .landing-content { padding: 1rem; gap: 1rem; }
                            .guess-info { flex-direction: column; gap: 0.75rem; }
                            .bonus-tabs { flex-direction: column; }
                            .flag-grid { grid-template-columns: 1fr; }
                            .options-grid { grid-template-columns: 1fr; }
                        }

                        @media (max-width: 480px) {
                            .hero-card { padding: 1.5rem; }
                            .hero-card h1 { font-size: 1.75rem; }
                            .hero-card p { font-size: 1rem; }
                            .stats-cards { gap: 0.5rem; }
                            .stat-card { padding: 0.75rem 0.5rem; }
                            .stat-icon { font-size: 1.25rem; margin-bottom: 0.25rem; }
                            .stat-value { font-size: 1.25rem; }
                            .stat-label { font-size: 0.6875rem; }
                            .theme-selector { gap: 0.125rem; padding: 0.25rem; }
                            .theme-btn { padding: 0.375rem; }
                        }
                    `}</style>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(GeoQuestGame));
    </script>
</body>
</html>
